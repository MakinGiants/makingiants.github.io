(function(a){a(function(){a(".button-collapse").sideNav();a(".scrollspy").scrollSpy();var d=2500,f=3800,D=f-3000,x=50,s=150,F=500,j=F+800,q=600,z=1500;n();function n(){v(a(".cd-headline.letters").find("b"));o(a(".cd-headline"))}function v(J){J.each(function(){var M=a(this),N=M.text().split(""),L=M.hasClass("is-visible");for(i in N){if(M.parents(".rotate-2").length>0){N[i]="<em>"+N[i]+"</em>"}N[i]=(L)?'<i class="in">'+N[i]+"</i>":"<i>"+N[i]+"</i>"}var K=N.join("");M.html(K).css("opacity",1)})}function o(K){var J=d;K.each(function(){var M=a(this);if(M.hasClass("loading-bar")){J=f;setTimeout(function(){M.find(".cd-words-wrapper").addClass("is-loading")},D)}else{if(M.hasClass("clip")){var L=M.find(".cd-words-wrapper"),O=L.width()+10;L.css("width",O)}else{if(!M.hasClass("type")){var P=M.find(".cd-words-wrapper b"),N=0;P.each(function(){var Q=a(this).width();if(Q>N){N=Q}});M.find(".cd-words-wrapper").css("width",N)}}}setTimeout(function(){C(M.find(".is-visible").eq(0))},J)})}function C(L){var K=H(L);if(L.parents(".cd-headline").hasClass("type")){var M=L.parent(".cd-words-wrapper");M.addClass("selected").removeClass("waiting");setTimeout(function(){M.removeClass("selected");L.removeClass("is-visible").addClass("is-hidden").children("i").removeClass("in").addClass("out")},F);setTimeout(function(){k(K,s)},j)}else{if(L.parents(".cd-headline").hasClass("letters")){var J=(L.children("i").length>=K.children("i").length)?true:false;m(L.find("i").eq(0),L,J,x);A(K.find("i").eq(0),K,J,x)}else{if(L.parents(".cd-headline").hasClass("clip")){L.parents(".cd-words-wrapper").animate({width:"2px"},q,function(){u(L,K);k(K)})}else{if(L.parents(".cd-headline").hasClass("loading-bar")){L.parents(".cd-words-wrapper").removeClass("is-loading");u(L,K);setTimeout(function(){C(K)},f);setTimeout(function(){L.parents(".cd-words-wrapper").addClass("is-loading")},D)}else{u(L,K);setTimeout(function(){C(K)},d)}}}}}function k(K,J){if(K.parents(".cd-headline").hasClass("type")){A(K.find("i").eq(0),K,false,J);K.addClass("is-visible").removeClass("is-hidden")}else{if(K.parents(".cd-headline").hasClass("clip")){K.parents(".cd-words-wrapper").animate({width:K.width()+10},q,function(){setTimeout(function(){C(K)},z)})}}}function m(N,L,M,K){N.removeClass("in").addClass("out");if(!N.is(":last-child")){setTimeout(function(){m(N.next(),L,M,K)},K)}else{if(M){setTimeout(function(){C(H(L))},d)}}if(N.is(":last-child")&&a("html").hasClass("no-csstransitions")){var J=H(L);u(L,J)}}function A(M,K,L,J){M.addClass("in").removeClass("out");if(!M.is(":last-child")){setTimeout(function(){A(M.next(),K,L,J)},J)}else{if(K.parents(".cd-headline").hasClass("type")){setTimeout(function(){K.parents(".cd-words-wrapper").addClass("waiting")},200)}if(!L){setTimeout(function(){C(K)},d)}}}function H(J){return(!J.is(":last-child"))?J.next():J.parent().children().eq(0)}function G(J){return(!J.is(":first-child"))?J.prev():J.parent().children().last()}function u(K,J){K.removeClass("is-visible").addClass("is-hidden");J.removeClass("is-hidden").addClass("is-visible")}a(".button-collapse").sideNav({menuWidth:240,activationWidth:70});a(".parallax").parallax();var c=document.querySelectorAll(".card-work");var B={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",transition:"transitionend"},g=B[Modernizr.prefixed("transition")];function h(J){return J.replace(/([A-Z])/g,function(L,K){return"-"+K.toLowerCase()})}function p(J){return document.querySelector('.popup[data-popup="'+J+'"]')}function t(J){return J.getBoundingClientRect()}function e(L,K){var J=t(L),M=t(K);return{height:M.height/J.height,width:M.width/J.width,left:M.left-J.left,top:M.top-J.top}}function I(J,K){return J.style[Modernizr.prefixed("transform")]="translate("+K.left+"px,"+K.top+"px) scale("+K.width+","+K.height+")"}function b(K,J){var M=" "+K.className+" ";var L=" "+J+" ";return(M.indexOf(L)!=-1)}function r(L){var K=L.target||L.srcElement;if(K=K.parentNode){do{var J=K.className;if(J){J=J.split(" ");if(-1!==J.indexOf("card-work")){return K;break}}}while(K=K.parentNode)}}function l(N){var L=r(N);var M=L,O=M.getAttribute("data-popup-id"),J=p(O);var K=e(M,J);M.style[Modernizr.prefixed("transitionDuration")]="0.5s";M.style[Modernizr.prefixed("transitionTimingFunction")]="cubic-bezier(0.4, 0, 0.2, 1)";M.style[Modernizr.prefixed("transitionProperty")]=h(Modernizr.prefixed("transform"));M.style.borderRadius=0;I(M,K);y(M,J);E(M,J)}function y(K,J){K.addEventListener(g,function L(){K.style.opacity=0;J.style.visibility="visible";J.style.zIndex=9999;K.removeEventListener(g,L)})}function E(K,J){J.addEventListener("click",function L(N){var M=e(J,K);K.style.opacity=1;K.style.borderRadius="6px";w(N);I(K,M)},false)}function w(J){J.target.style.visibility="hidden";J.target.style.zIndex=2}})})(jQuery);